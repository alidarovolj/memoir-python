# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –î–æ–±–∞–≤–ª–µ–Ω Celery Beat –≤ Docker Compose
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å `celery_beat` –≤ `docker-compose.yml`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å `celery_beat` –≤ `docker-compose.prod.yml`
- **–ë–µ–∑ —ç—Ç–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**

### 2. –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∑–∞–¥–∞—á–∏ –≤ Celery Beat Schedule
- ‚úÖ `send-daily-task-summary` - –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞ –≤ 8:00
- ‚úÖ `check-overdue-tasks` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –∫–∞–∂–¥—ã–µ 4 —á–∞—Å–∞
- ‚úÖ –û—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏ —É–∂–µ –±—ã–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫
- ‚úÖ `due_date` —Ç–µ–ø–µ—Ä—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å –≤—Ä–µ–º–µ–Ω–µ–º –∏–∑ `scheduled_time`
- ‚úÖ –ï—Å–ª–∏ `scheduled_time = "08:00"`, —Ç–æ `due_date = 2026-01-19 08:00:00` (–Ω–µ 00:00:00)
- ‚úÖ –ï—Å–ª–∏ `scheduled_time` –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω–µ—Ü –¥–Ω—è (23:59)

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ recurring instances
- ‚úÖ –≠–∫–∑–µ–º–ø–ª—è—Ä—ã –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–¥–∞—á —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º
- ‚úÖ –í—Ä–µ–º—è –±–µ—Ä–µ—Ç—Å—è –∏–∑ `scheduled_time` —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –∑–∞–¥–∞—á–∏

### 5. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –î–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π: –ø—Ä–æ–≤–µ—Ä–∫–∞ `updated_at < now - 55 –º–∏–Ω—É—Ç`
- ‚úÖ –î–ª—è –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö: –ø—Ä–æ–≤–µ—Ä–∫–∞ `updated_at < now - 23 —á–∞—Å–∞`
- ‚úÖ –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è `updated_at` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

## üîç –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
1. ‚úÖ Celery Beat –¥–æ–±–∞–≤–ª–µ–Ω –≤ docker-compose
2. ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `celery_app.py`
3. ‚úÖ –ü—Ä–∏–≤—ã—á–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º `due_date` (—Å –≤—Ä–µ–º–µ–Ω–µ–º)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Celery Beat
2. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ø—Ä–∏–≤—ã—á–∫—É –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `due_date` –≤ –ë–î
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Firebase credentials –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

## üìã –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Celery Beat –∑–∞–ø—É—â–µ–Ω
docker-compose logs celery_beat

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Celery Worker
docker-compose logs celery_worker

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∑–∞–¥–∞—á
docker-compose exec celery_beat celery -A app.tasks.celery_app inspect scheduled

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –≤—Ä—É—á–Ω—É—é –¥–ª—è —Ç–µ—Å—Ç–∞
docker-compose exec celery_worker celery -A app.tasks.celery_app call check_task_reminders
```

## üöÄ –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `docker-compose logs celery_beat`
2. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –ø—Ä–∏–≤—ã—á–∫—É —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î, —á—Ç–æ `due_date` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. –î–æ–∂–¥–∞—Ç—å—Å—è –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ

## üìù –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã

1. `backend/app/tasks/celery_app.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–¥–∞—á–∏ –≤ beat_schedule
2. `backend/app/api/v1/tasks.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫ (due_date —Å –≤—Ä–µ–º–µ–Ω–µ–º)
3. `backend/app/services/task_service.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ recurring instances
4. `backend/app/tasks/notification_tasks.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
5. `backend/docker-compose.yml` - –¥–æ–±–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å celery_beat
6. `backend/docker-compose.prod.yml` - –¥–æ–±–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å celery_beat
